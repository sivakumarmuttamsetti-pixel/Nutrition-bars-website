<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Nutrition Bars</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="bg-success text-white text-center py-4">
        <div class="container">
            <h1 class="display-4">Checkout</h1>
            <p class="lead">Complete your order</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">Nutrition Bars</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="products.html">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="peanutbutter.html">Peanut Butter</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="combo.html">Combo Offers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="cart.html">Cart (<span id="cart-count">0</span>)</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container my-5">
        <div class="row">
            <!-- Billing Information -->
            <div class="col-lg-8">
                <div class="card shadow">
                    <div class="card-header bg-success text-white">
                        <h3 class="mb-0">Billing Information</h3>
                    </div>
                    <div class="card-body">
                        <form id="checkout-form">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="firstName" class="form-label">First Name *</label>
                                    <input type="text" class="form-control" id="firstName" name="firstName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="lastName" class="form-label">Last Name *</label>
                                    <input type="text" class="form-control" id="lastName" name="lastName" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Email Address *</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">Phone Number *</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="address" class="form-label">Address *</label>
                                <input type="text" class="form-control" id="address" name="address" required>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="city" class="form-label">City *</label>
                                    <input type="text" class="form-control" id="city" name="city" required>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="state" class="form-label">State *</label>
                                    <select class="form-select" id="state" name="state" required>
                                        <option value="">Select State</option>
                                        <option value="Maharashtra">Maharashtra</option>
                                        <option value="Delhi">Delhi</option>
                                        <option value="Karnataka">Karnataka</option>
                                        <option value="Gujarat">Gujarat</option>
                                        <option value="West Bengal">West Bengal</option>
                                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                                        <option value="Tamil Nadu">Tamil Nadu</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="col-md-3 mb-3">
                                    <label for="pincode" class="form-label">Pincode *</label>
                                    <input type="text" class="form-control" id="pincode" name="pincode" required>
                                </div>
                            </div>

                            <!-- Payment Method -->
                            <div class="mt-4">
                                <h5>Payment Method</h5>
                                <div class="card border">
                                    <div class="card-body">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="radio" name="paymentMethod" id="cod" value="cod" checked>
                                            <label class="form-check-label" for="cod">
                                                Cash on Delivery (COD)
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="radio" name="paymentMethod" id="upi" value="upi">
                                            <label class="form-check-label" for="upi">
                                                UPI Payment
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="radio" name="paymentMethod" id="card" value="card">
                                            <label class="form-check-label" for="card">
                                                Credit/Debit Card
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="paymentMethod" id="netbanking" value="netbanking">
                                            <label class="form-check-label" for="netbanking">
                                                Net Banking
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-check mt-3">
                                <input class="form-check-input" type="checkbox" id="termsConditions" required>
                                <label class="form-check-label" for="termsConditions">
                                    I agree to the <a href="#" class="text-success">Terms and Conditions</a>
                                </label>
                            </div>

                            <div class="d-grid gap-2 mt-4">
                                <button type="submit" class="btn btn-success btn-lg">Place Order</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Order Summary -->
            <div class="col-lg-4">
                <div class="card shadow">
                    <div class="card-header bg-dark text-white">
                        <h4 class="mb-0">Order Summary</h4>
                    </div>
                    <div class="card-body">
                        <div id="order-items">
                            <!-- Items will be loaded here -->
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between">
                            <span>Subtotal:</span>
                            <span id="order-subtotal">₹0.00</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Shipping:</span>
                            <span id="order-shipping">Free</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Tax:</span>
                            <span id="order-tax">₹0.00</span>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between">
                            <strong>Total:</strong>
                            <strong id="order-total" class="text-success">₹0.00</strong>
                        </div>
                    </div>
                </div>

                <!-- Security Information -->
                <div class="card shadow mt-4">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">Secure Checkout</h5>
                    </div>
                    <div class="card-body">
                        <p class="small mb-2">🔒 Your payment information is secure</p>
                        <p class="small mb-2">🚚 Free shipping on orders above ₹500</p>
                        <p class="small mb-2">📞 24/7 customer support</p>
                        <p class="small mb-0">↩️ Easy returns within 30 days</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-success text-white text-center py-4">
        <div class="container">
            <p class="mb-0">&copy; 2025 Nutrition Bars. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Load checkout data and display order summary
        document.addEventListener('DOMContentLoaded', function() {
            loadOrderSummary();
        });

        function loadOrderSummary() {
            try {
                const checkoutData = localStorage.getItem('nutritionbars-checkout');
                if (!checkoutData) {
                    // No checkout data, redirect to cart
                    window.location.href = 'cart.html';
                    return;
                }

                const data = JSON.parse(checkoutData);
                const orderItems = document.getElementById('order-items');
                const subtotalElement = document.getElementById('order-subtotal');
                const totalElement = document.getElementById('order-total');

                let html = '';
                data.items.forEach(item => {
                    html += `
                        <div class="d-flex justify-content-between mb-2">
                            <span>${item.name} (x${item.quantity})</span>
                            <span>₹${(item.price * item.quantity).toFixed(2)}</span>
                        </div>
                    `;
                });

                orderItems.innerHTML = html;
                subtotalElement.textContent = `₹${data.total.toFixed(2)}`;
                totalElement.textContent = `₹${data.total.toFixed(2)}`;

            } catch (error) {
                console.error('Error loading checkout data:', error);
                window.location.href = 'cart.html';
            }
        }

        // Handle form submission
        document.getElementById('checkout-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            // Show processing modal
            const modal = document.createElement('div');
            modal.innerHTML = `
                <div class="modal fade" id="processingModal" tabindex="-1" data-bs-backdrop="static">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-body text-center py-4">
                                <div class="spinner-border text-success mb-3" role="status"></div>
                                <h5>Processing your order...</h5>
                                <p class="text-muted">Please wait while we process your payment</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            const modalInstance = new bootstrap.Modal(document.getElementById('processingModal'));
            modalInstance.show();
            
            // Simulate processing time
            setTimeout(() => {
                modalInstance.hide();
                
                // Generate order number
                const orderNumber = 'NB' + Date.now().toString().slice(-8);
                
                // Clear cart and checkout data
                localStorage.removeItem('nutritionbars-cart');
                localStorage.removeItem('nutritionbars-checkout');
                
                // Show success message
                alert(`Order placed successfully! Your order number is: ${orderNumber}. You will receive a confirmation email shortly.`);
                
                // Redirect to home page
                window.location.href = 'index.html';
            }, 3000);
        });
    </script>
</body>
</html>
